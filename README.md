# å’Œæ­Œä¿³å¥ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®èª²é¡Œ
1ä¸‡ä»¥ä¸Šã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹(postgresãªã©)ã‚’ä½¿ç”¨ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³(åŸºæœ¬GUI)(ãŠãã‚‰ãAPIã¨ã‹ã§ã‚‚è‰¯ã•ãã†)ã‚’ä½œæˆã›ã‚ˆ
æå‡ºã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä¸­èº«(ã‚³ã‚¢ãƒ€ãƒ³ãƒ–ï¼Ÿ)ã¨htmlã®ãƒ¬ãƒãƒ¼ãƒˆä»˜ã
æœŸé™ã¯7/21 23:59

ã¾ãšã¯ä¼ç”»æ›¸ã‚„è¨­è¨ˆã‚’ã—ã¦ã»ã—ã„
ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ãŒå«ã¾ã‚Œã‚‹ã¨å¬‰ã—ã„

ä¸‡è‘‰é›†ãƒ»ç™¾äººä¸€é¦–ãƒ»è¿‘ä»£çŸ­æ­Œï¼ˆä½œè€…ãƒ»æ™‚ä»£ãƒ»å†…å®¹ãƒ»å­£èªãƒ»ã‚¸ãƒ£ãƒ³ãƒ«ï¼‰
ä»¶æ•°ï¼šæ­Œé›†ãƒ»å¥é›†ã‚ã‚ã›ã¦1ä¸‡ä»¥ä¸Šç¢ºä¿å¯èƒ½
GUIæ¡ˆï¼šå…¨æ–‡æ¤œç´¢ã€å­£èªã‹ã‚‰æ¤œç´¢ã€ãƒ©ãƒ³ãƒ€ãƒ ä¿³å¥è¡¨ç¤º
è¢«ã‚Šã«ãã•ï¼šå›½æ–‡å­¦ç³»ã¯æ„å¤–ã¨ç‹™ã„ç›®ã€è‡ªç„¶è¨€èªå‡¦ç†ã¨çµ„ã¿åˆã‚ã›ã¦ã‚‚é¢ç™½ã„

- å‡ºå…¸å…ƒ
    
    **1.å›½æ–‡å­¦ç ”ç©¶è³‡æ–™é¤¨ï¼ˆå›½æ–‡ç ”ï¼‰å…¬é–‹DB**
    
    ğŸ“ [https://www.nijl.ac.jp/pages/database/](https://www.nijl.ac.jp/pages/database/)
    
    â€¢	ä¸‡è‘‰é›†ãƒ»å¤ä»Šå’Œæ­Œé›†ãƒ»æ–°å¤ä»Šå’Œæ­Œé›†ãªã©ã‚’ç¶²ç¾…
    
    â€¢	ç‰¹ã«ã€Œå’Œæ­Œç´¢å¼•DBã€ã‚„ã€Œå’Œæ­Œå¤§æˆã€ãªã©ãŒå¼·åŠ›
    
    â€¢	å¤šããŒCSVå½¢å¼ or Webä¸Šã§æ©Ÿæ¢°å–å¾—å¯èƒ½
    
    â€¢	ãƒ‡ãƒ¼ã‚¿æ§‹é€ ï¼šå’Œæ­Œãƒ»ä½œè€…ãƒ»å‡ºå…¸ãƒ»æ™‚ä»£ãªã©
    
    **2. é’ç©ºæ–‡åº«**
    
    ğŸ“ [https://www.aozora.gr.jp/](https://www.aozora.gr.jp/)
    
    â€¢	è¿‘ä»£çŸ­æ­Œï¼ˆä¸è¬é‡æ™¶å­ãƒ»çŸ³å·å•„æœ¨ãªã©ï¼‰ã®å®åº«
    
    â€¢	å…¨æ–‡TXTå½¢å¼ã§æ©Ÿæ¢°å‡¦ç†ãŒå¯èƒ½
    
    â€¢	Pythonã§ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼‹æ•´å½¢ã™ã‚Œã°å¤§é‡ã«æŠ½å‡ºå¯
    
    â€¢	ãƒ†ã‚­ã‚¹ãƒˆæ§‹é€ ä¾‹ï¼šã¿ã ã‚Œé«ªã€€ä¸è¬é‡æ™¶å­
    
    ã‚„ã¯è‚Œã® ã‚ã¤ãè¡€æ±ã« ãµã‚Œã‚‚è¦‹ã§ ã•ã³ã—ã‹ã‚‰ãšã‚„ é“ã‚’èª¬ãå›
    

| **é …ç›®** | **å†…å®¹** |
| --- | --- |
| ã‚¢ãƒ—ãƒªå½¢æ…‹ | GUIãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªï¼ˆãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œï¼‰ |
| ä½¿ç”¨DB | PostgreSQLï¼ˆ1ä¸‡ä»¶ä»¥ä¸Šã®å’Œæ­Œï¼‰ |
| å¿…é ˆæ©Ÿèƒ½ | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ï¼ˆ1ä¸‡é¦–ã‚’æŠ•å…¥ï¼‰ |
| GUIè¦ä»¶ | æœ€ä½é™ã®æ¤œç´¢ãƒ»è¡¨ç¤ºã§OKï¼ˆTkinterç­‰ï¼‰ |
| æå‡ºç‰© | DBãƒ€ãƒ³ãƒ—ï¼ˆ.sqlï¼‰ã€HTMLãƒ¬ãƒãƒ¼ãƒˆã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚³ãƒ¼ãƒ‰ |
| å‡ºå…¸ | å›½æ–‡ç ”ãƒ»é’ç©ºæ–‡åº« |

| **æ“ä½œç”»é¢** | **æ©Ÿèƒ½** |
| --- | --- |
| èµ·å‹•ç”»é¢ | ã€Œå’Œæ­Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ã€ãƒœã‚¿ãƒ³ä»˜ã |
| æ¤œç´¢æ¬„ | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›æ¬„ï¼‹æ¤œç´¢ãƒœã‚¿ãƒ³ |
| è¡¨ç¤ºæ¬„ | å’Œæ­Œä¸€è¦§ï¼ˆæœ¬æ–‡ï¼‹ä½œè€…ï¼‹å‡ºå…¸ãªã©ï¼‰ã‚’è¡¨ç¤º |
| ãƒ©ãƒ³ãƒ€ãƒ è¡¨ç¤º | ãƒ©ãƒ³ãƒ€ãƒ 1é¦–è¡¨ç¤ºãƒœã‚¿ãƒ³ |

| **é …ç›®** | **ä½¿ç”¨å†…å®¹** |
| --- | --- |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | PostgreSQLï¼ˆwakaãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰ |
| GUI | Python + Tkinter |
| åˆæœŸåŒ–æ©Ÿèƒ½ | CSV â†’ Python â†’ DBæŠ•å…¥ |
| æå‡ºãƒ•ã‚¡ã‚¤ãƒ« | ã‚³ã‚¢ãƒ€ãƒ³ãƒ—ï¼ˆ.sqlï¼‰ã€ãƒ¬ãƒãƒ¼ãƒˆï¼ˆHTMLï¼‰ |
| å‡ºå…¸ | å›½æ–‡å­¦ç ”ç©¶è³‡æ–™é¤¨ã€é’ç©ºæ–‡åº« |
- æå‡ºãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆä¾‹

```
    waka_app/
    â”œâ”€â”€ app_gui.py          # GUIãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªï¼ˆTkinterï¼‰
    â”œâ”€â”€ import_waka.py      # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    â”œâ”€â”€ waka.csv            # å’Œæ­Œ1ä¸‡é¦–ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆå‡ºå…¸ä»˜ãï¼‰
    â”œâ”€â”€ waka_dump.sql       # PostgreSQLãƒ€ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ report.html         # æå‡ºç”¨HTMLãƒ¬ãƒãƒ¼ãƒˆ
    â”œâ”€â”€ [README.md](http://readme.md/)           # å®Ÿè¡Œæ‰‹é †
```
    

```mermaid
erDiagram
    WAKA {
        INT id PK "å’Œæ­ŒIDï¼ˆä¸»ã‚­ãƒ¼ï¼‰"
        TEXT text "å’Œæ­Œæœ¬æ–‡"
        TEXT kana "ãµã‚ŠãŒãªï¼ˆä»»æ„ï¼‰"
        TEXT romaji "ãƒ­ãƒ¼ãƒå­—ï¼ˆä»»æ„ï¼‰"
        VARCHAR author "ä½œè€…å"
        VARCHAR era "æ™‚ä»£ï¼ˆä¾‹ï¼šå¹³å®‰ã€æ˜æ²»ï¼‰"
        VARCHAR collection "æ‰€åæ­Œé›†ï¼ˆå¤ä»Šé›†ã€ç™¾äººä¸€é¦–ãªã©ï¼‰"
        VARCHAR season "å­£ç¯€åˆ†é¡ï¼ˆæ˜¥ãƒ»å¤ãƒ»ç§‹ãƒ»å†¬ãƒ»ç„¡å­£ï¼‰"
        VARCHAR theme "ãƒ†ãƒ¼ãƒï¼ˆæ‹ã€è‡ªç„¶ã€äººç”Ÿãªã©ï¼‰"
        TEXT notes "è¨³æ–‡ã‚„æ³¨é‡ˆ"
        TIMESTAMP created_at "ç™»éŒ²æ—¥æ™‚ï¼ˆè‡ªå‹•ï¼‰"
    }
```

- å’Œæ­Œãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
    
    ```sql
    CREATE TABLE waka (
      id SERIAL PRIMARY KEY,
      text TEXT NOT NULL,
      kana TEXT,
      romaji TEXT,
      author VARCHAR(100),
      era VARCHAR(50),
      collection VARCHAR(100),
      season VARCHAR(20),
      theme VARCHAR(50),
      notes TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    );
    ```

```plantuml
@startuml
class WakaImporter {
    +run(): void
    -fetch_zip(): ZipFile
    -extract_poems(z: ZipFile): List[String]
    -to_dataframe(poems: List[String]): DataFrame
    -save_csv(path: String): void
}

class DBInitializer {
    +import_csv(path: String): void
    -connect_db(): Connection
    -execute_insert(waka: Waka): void
}

class WakaAppGUI {
    +main(): void
    -setup_gui(): void
    -search_waka(keyword: String): List[Waka]
    -random_waka(): Waka
    -on_import_button(): void
    -display_results(wakas: List[Waka]): void
    -connect_db(): Connection
}

class Waka {
    +id: int
    +text: str
    +kana: str
    +romaji: str
    +author: str
    +era: str
    +collection: str
    +season: str
    +theme: str
    +notes: str
}

WakaImporter --> Waka : creates
DBInitializer --> Waka : inserts
WakaAppGUI --> DBInitializer : uses
WakaAppGUI --> Waka : displays
@enduml
```
full_app_package/
â”œâ”€â”€ full_auto_manyoshu.py      # ä¸‡è‘‰é›†å–å¾— â†’ waka_manyoshu.csv
â”œâ”€â”€ aozora_auto_tanka.py       # é’ç©ºæ–‡åº«å–å¾— â†’ waka_aozora.csv
â”œâ”€â”€ merge_waka.py              # CSVçµ±åˆ â†’ waka.csv
â”œâ”€â”€ import_and_gui.py          # CSVç”Ÿæˆãƒ»DBæŠ•å…¥ãƒ»GUIä¸€ä½“ç‰ˆ
â”œâ”€â”€ waka_dump.sql              # ï¼ˆå®Ÿè¡Œå¾Œç”Ÿæˆã•ã‚Œã‚‹ï¼‰PostgreSQLãƒ€ãƒ³ãƒ—
â”œâ”€â”€ report.html                # HTMLãƒ¬ãƒãƒ¼ãƒˆï¼ˆæ§‹æˆï¼†ã‚¹ã‚¯ã‚·ãƒ§å…¥ã‚Šï¼‰
â”œâ”€â”€ requirements.txt           # å¿…è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§
â””â”€â”€ README.md                  # å®Ÿè¡Œæ‰‹é †
